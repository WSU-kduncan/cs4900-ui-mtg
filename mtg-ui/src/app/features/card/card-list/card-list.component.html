<div ngSkipHydration>
  @if (errorMessage()) {
    <div class="alert alert-danger" role="alert">
      {{ errorMessage() }}
    </div>
  }

  @if (isLoading()) {
    <div>Loading cards...</div>
  }

  <app-card-form (createCard)="createCard($event)"></app-card-form>

  <div class="search-section">
    <h3>Search Cards</h3>
    <div class="search-controls">
      <input placeholder="Search..."
             [value]="query()"
             (input)="onSearch($event)" />
      <button (click)="onClear()">Clear</button>
    </div>
  </div>

  <table>
    <thead>
      <tr>
        <th>Card #</th>
        <th>Set</th>
        <th>Name</th>
        <th>Type</th>
        <th>Mana</th>
        <th>Condition</th>
        <th>Price</th>
        <th>Stock</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      @for (card of filteredCards(); track trackByCard($index, card)) {
        <app-card-detail [item]="card" (cardDeleted)="onCardDeleted()"></app-card-detail>
      }
    </tbody>
  </table>
</div>
<div ngSkipHydration>
  <h2>MTG Cards</h2>

  @if (errorMessage()) {
    <div class="alert alert-danger" role="alert">
      {{ errorMessage() }}
    </div>
  }

  @if (isLoading()) {
    <div>Loading cards...</div>
  }

  <input placeholder="Search..."
         [value]="query()"
         (input)="onSearch($event)" />
  <button (click)="onClear()">Clear</button>

  <app-card-form (createCard)="createCard($event)"></app-card-form>

  <table>
    <thead>
      <tr>
        <th>#</th>
        <th>Set</th>
        <th>Name</th>
        <th>Type</th>
        <th>Mana</th>
        <th>Price</th>
        <th>Stock</th>
      </tr>
    </thead>
    <tbody>
      @for (card of filteredCards(); track trackByCard($index, card)) {
        <app-card-detail [item]="card"></app-card-detail>
      }
    </tbody>
  </table>
</div>
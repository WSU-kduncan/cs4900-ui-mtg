<div class="workers-container">
  <h2>Our Team</h2>

  <app-worker-form></app-worker-form>

  <div class="worker-search">
    <input type="text" placeholder="Search workers by name, role, or email" (input)="workerSearch.set($any($event.target).value)" [value]="workerSearch()">
  </div>

  @if (filteredWorkers.length > 0) {
    <ul>
      
      @for (worker of filteredWorkers; track worker.employeeID || $index) {
        <li class="worker-item">
          <div class="worker-row">
            <app-worker-detail [worker]="worker"></app-worker-detail>
            <div class="worker-actions">
              <button (click)="deleteWorker(worker.employeeID)" class="delete-btn">
                Delete
              </button>
            </div>
          </div>
        </li>
      }
    </ul>
  } @else {
    <p>There are currently no workers to display.</p>
  }
</div>

@if (selectedWorkerID()) {
  <div class="worker-orders">
    <h3>Orders handled by
      <em>
        {{ selectedWorker?.firstName }} {{ selectedWorker?.lastName }}
      </em>
    </h3>

    <div class="order-search">
      <input type="text" placeholder="Search orders by id, customer, or status" (input)="orderSearch.set($any($event.target).value)" [value]="orderSearch()">
      <button (click)="selectWorker()">Clear</button>
    </div>

    @if (filteredOrders.length > 0) {
      <ul class="orders-list">
        @for (order of filteredOrders; track order.orderId) {
          <li class="order-item">
            <strong>Order #{{ order.orderId }}</strong> â€” {{ order.customer }}
            <div>Status: {{ order.status }}</div>
            <div>Items: {{ order.items.join(', ') }}</div>
          </li>
        }
      </ul>
    } @else {
      <p>No orders found for this worker.</p>
    }
  </div>
}